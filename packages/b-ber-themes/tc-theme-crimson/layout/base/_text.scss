// Block elements

// Text Sizes
h1 { @include type-settings(0); margin-top: 0; margin-bottom: 0; padding-top: one-line(0); padding-bottom: one-line(0); }
h2 { @include type-settings(0); margin-top: 0; margin-bottom: 0; padding-top: one-line(0); padding-bottom: one-line(0); }
h3 { @include type-settings(0); margin-top: 0; margin-bottom: 0; padding-top: one-line(0); padding-bottom: one-line(0); }
h4 { @include type-settings(0); margin-top: 0; margin-bottom: 0; padding-top: one-line(0); padding-bottom: one-line(0); }
h5 { @include type-settings(0); margin-top: 0; margin-bottom: 0; padding-top: one-line(0); padding-bottom: one-line(0); }
h6 { @include type-settings(0); margin-top: 0; margin-bottom: 0; padding-top: one-line(0); padding-bottom: one-line(0); }
p  { @include type-settings(0); }

section {
    h1, h2, h3, h4, h5, h6 {
        padding-top: 0;
    }
}

// Text Properties
p {
    @if $text-indent == true {
        text-indent: one-em(0) !important;
        h1 + &, h2 + &, h3 + &, h4 + &, h5 + &, h6 + & { text-indent: 0 !important; }
    } @else {
        text-indent: 0 !important;
        h1 + &, h2 + &, h3 + &, h4 + &, h5 + &, h6 + & { text-indent: 0 !important; }
    }
}



h1,h2,h3,h4,h5,h6 {
    text-indent: 0;
    text-transform: none;
    text-align: center;
    font-weight: 400;
    font-style: normal;
    @include hyphens(none);
    @include type-settings(0);
    @include following-paragraph-not-indented;
}

a, a:link, a:visited {
    color: $black;
}


h1 {
    padding-bottom: four-lines(0);
    section & {
        @include padding(0,0,4,0,0);
    }

    &.book-title,
    &.figures-title {
        padding: 0;
    }

    section.backmatter & {
        @include type-settings(-1);
        @include padding(2, 0, 2, 0, -1);
    }

    section.titlepage & {
        padding-bottom: 0;
    }

    section.preface &,
    section.frontmatter &,
    section.acknowledgements & {
        @include following-paragraph-not-indented;
    }

    section.afterword &,
    section.seriespage &,
    section.credits &,
    section.contributors &,
    section.appendix & {
        @include padding(0,0,4,0,-1);
        @include following-paragraph-not-indented;
    }

}

h2 {
    text-align: left;
    font-weight: bold;

    section & {
        @include padding(0, 0, 1, 0, 0);
    }

    section.backmatter & {
        @include type-settings(-1);
        @include padding(1, 0, 0, 0, -1);
    }

    section.titlepage & {
        padding-bottom: one-line(0);
    }


    section.afterword &,
    section.seriespage &,
    section.credits &,
    section.contributors &,
    section.appendix & {
        @include type-settings(-1);
        @include padding(0, 0, 1, 0, -1);
        @include following-paragraph-not-indented;
    }
}

h3, h4, h5, h6 {
    text-align: left;
    font-weight: bold;
    padding-bottom: one-line(0);
    margin-top: two-lines(0);
    section.titlepage & {
        @include type-settings(-4);
    }
}

section > h3:first-child,
section > h4:first-child,
section > h5:first-child,
section > h6:first-child  {
    margin-top: 0;
}

p {
    @include type-settings(0);
    text-indent: one-em(0);

    blockquote & {
        text-indent: 0!important;
        margin-bottom: 0!important;
        @include type-settings(0);
    }

    section.backmatter &,
    section.afterword &,
    section.seriespage &,
    section.credits &,
    section.contributors &,
    section.appendix & {
        @if $text-indent != false {
            text-indent: one-em(0) !important;
        } @else {
            text-indent: one-em(0);
        }
        @include following-paragraph-not-indented;
        @include type-settings(-2);
        @include padding(0, 0, 1, 0, -2);
    }

    section.colophon & {
        @include following-paragraph-not-indented;
        @include type-settings(-2);
        @include padding(0, 0, 1, 0, -2);
        text-indent:0 !important;
    }

    section.preface &,
    section.frontmatter &,
    section.acknowledgements & {
        @if $text-indent != false {
            text-indent: one-em(0) !important;
        } @else {
            text-indent: one-em(0);
        }
        padding-bottom: 0;
    }

    section.frontmatter.dedication & {
        @include type-settings(0);
        @include padding(0, 1, 1, 0, 0);
        text-indent: 0;
    }

    section.dialogue & {
        &.interlocutor-parent {
            @include padding(1, 0, 0, 0, 0);
            margin-top: 0;
            .interlocutor {
                @include type-settings(-7);
                line-height: 1;
                letter-spacing: one-em(-35) ;
                margin-right: one-em(-12);
                font-weight: bold;
                text-transform: uppercase;
                vertical-align: baseline;
                 @if $build == web {
                     margin-right: one-em(-18);
                 }

            }
        }
    }

    section.colophon &,
    section.afterword & {
        &:first-child,
        &:first-child, {
          text-indent: 0 !important;
        }
    }


    .figcaption & {
        text-indent: 0;
    }

    .pullquote & {
        @include following-paragraph-not-indented;
        @include type-settings(-4);
        text-indent: 0!important;
        margin-bottom: 0!important;
        font-style: italic;
        font-weight: normal;
    }

    .pullquote + & {
        text-indent: 0;
    }

    .epigraph .pullquote & {
        @include following-paragraph-not-indented;
        @include type-settings(0);
        float: none;
        width: 100%;
        margin-top: 0!important;
        padding-top: 0!important;
        text-indent:0 !important;
        text-align: center;
    }

    &.interlocutor-parent {
        text-indent: 0!important;
        margin-top: one-line(0);
        &:first-child { margin-top: 0; }
    }
}

cite {
    .pullquote & {
        @include following-paragraph-not-indented;
        @include type-settings(-4);
        font-weight: normal;
        font-style: normal;
        text-indent: 0;
        display: block;
        text-align: right;
        width: 75%;
        margin-left: 25%;
    }
    .pullquote.full-width & {
        margin-left: 0;
        width: 100%;
    }
    .epigraph .pullquote & {
        @include following-paragraph-not-indented;
        @include type-settings(0);
        float: none;
        width: 100%;
        text-align: center;
        margin-left: 0;
    }
}


.end-notes header + p {
    margin-top:0;
}

// Inline elements
sup,
sub {
    @include type-settings(-8);
    line-height: 1;
    color: $black;
    vertical-align: baseline;
    text-decoration: none;
    position: relative;
    left: 1px;
    &:hover { text-decoration: underline; }
}

sup { top:      one-em(-8) * -1.25; }
sub { bottom:   one-em(-8) * -1;    }

small {
    @include type-settings(-4);
}

pre {
    @include padding(1,1,1,1,0);
    font-size: 1em;
    line-height: 1;

    word-wrap: normal;
    white-space: pre;
    overflow: auto;

    text-indent: 0!important;
    border-radius: 3px;
    font-family: Consolas, Menlo, Courier, monospace;
    background-color: #f6f8fa;
}

code {
    @include type-settings(-4);
    line-height: 1.3;
}

i {
    font-weight: 400;
    font-style: italic;
    font-family: inherit;
    b, strong {
        font-weight: 700;
        font-style: italic;
    }
}

em {
    font-weight: 400;
    font-style: italic;
    font-family: inherit;
    b, strong {
        font-weight: 700;
        font-style: italic;
    }
    em, .pullquote p & {
        font-weight: 400;
        font-style: normal;
    }
}

strong,b {
    font-weight: 700;
    font-style: normal;
    font-family: inherit;
    em, i {
        font-weight: 700;
        font-style: italic;
    }
}


a.footnote-ref {
    @extend sup;
}

aside.footnote {
    margin-left: one-em(0);
    a.footnote-link {
        display: inline-block;
        text-indent: one-em(0) * -1;
    }
}

ol.footnotes {
    margin: 0;
    li {
        padding: 0;
        margin: 0;
        text-indent: 0!important;
        font-size: 1em; // children, since we need to include paras in the li elements
        p { text-indent: 0!important; }
        a { text-decoration: none!important; }
        span.hidden-backlink { display: inline; }
    }
}
